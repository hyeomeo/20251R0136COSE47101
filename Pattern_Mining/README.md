## 현재 진행 상황

(06.14)

기존의 클러스터 분류에서 유사한 형태를 띄는 것들 끼리 새로 묶어서 0 ~ 3과 기타-1로 총 5 그룹으로 새로 분류한 내용을 바탕으로 패턴마이닝을 진행해 보았다.

각 그룹별로 인원 수 차이가 많이 나기 때문에 여행지 추천 목록 수에 있어서 기존 보다 불균형이 더 심해지는 문제점이 발생했다.

Classification 단계에서 해당 클러스터링 방식의 정확도를 추가로 검증해보고 판단해야 할 것 같다.

---------------------------------------------------

(06.11)

최종본은 Final 폴더에 모아서 넣었습니다.

최종적으로 전권역 클러스터 별로 자주 나타나는 트랜잭션 패턴들을 출력해주고, 해당 트랜잭션을 한눈에 보기 위해서 클러스터 별로 여행지 목록을 텍스트 파일로 출력해주는 코드를 작성했다.

클러스터 마다 빈도 수가 일정하지 않아 패턴 임계치에 따라 특정 클러스터는 추천 여행지가 존재하지 않는 문제가 있었는데,
점차 임계치를 줄여나가며 최소 가짓 수를 채우는 코드를 추가해서 모든 클러스터에 최소 5 가지의 여행지 트랜잭션을 갖도록 했다.

또한 100회 이상 등장하는 여행지만 목록으로 넣었더니 제주 지역 관광지에만 몰리는 문제점이 있어서 50회 이상 등장 조건으로 변경했다.
이때문에 전반적으로 가짓 수가 늘어나서 신뢰도가 하락하는 문제가 있어서 신뢰도 임계치를 하향 조정했다.

시각화 자료(Figure_1.png)와 트랜잭션 모음 결과(cluster_transaction_output.txt)를 함께 업로드하였으며, 코드의 임계치 값을 변경해서 원하는 데이터로 조정하는 것도 가능하다.

-------------------------------------------------------

(06.06)
단순하게 트랜잭션 모음 출력해주는 코드를 추가했다.

만족도 예측 관련 교수님의 조언에 따라 개선한 후에 적절한 패턴 마이닝 결과가 출력되도록 조건 임계 값을 조율해서 트랜잭션을 뽑아내는 것으로 마무리 하면 될 것 같다.

------------------------------------------------------------

1차 패턴 마이닝 결과를 바탕으로 분석에 사용할 적합한 클러스터링 결과를 정하여서 성별/연령/스타일 등으로 30개의 군집으로 나눈 데이터를 사용했다.

해당 데이터를 바탕으로 4 권역을 모두 총합한 전 권역의 관광지-클러스터 데이터셋을 만들었고, 이를 바탕으로 2차 패턴 마이닝을 진행했다.

모든 권역의 데이터가 합쳐지다 보니 기존의 임계 조건 값으로는 제대로 된 값을 얻어낼 수 없었고, 우선 100회 이상 반복해서 등장하는 유명 관광지를 대상으로 min_support = 0.003, min_threshold=0.1 의 조건으로 패턴 마이닝을 수행했다.

하지만 여전히 적절한 추천 목록 데이터 셋으로 보기엔 힘들어 보이기에 추가적인 수정이 필요해 보인다.

------------------------------------------------------------------------
## 1. 분석 기법 선정 이유

빈발 패턴을 탐색하는 과정에 FP-Growth 기법을 사용했다. 이는 Apriori 기법 보다 메모리와 시간 부분에서 효율이 더 높아서 여러 조건부 필터를 사용하더라도
신속하게 계산이 가능한 장점이 존재한다.

또한 해당 기법을 사용함에 있어서 연관 규칙을 추출하기 위해 confidence 값이 0.35 이상인 것과, support 값이 0.8 % 이상이 되도록 설정했다.
최소한의 정확도를 보장하는 추천을 위해 조건부 확률 연관도가 35 % 가 넘는 것만 추출해 추천 정확도가 떨어지는 희박 규칙은 제거하도록 했다.

또한 전체적인 분석에 있어서 NetworkX 색상 매핑 규칙 기능을 활용해 텍스트 표로 만들어진 결과 값 보다 전달력있는 결과 값을 제공하고자 했다.

## 2. 구현 방식 요약

전체적인 방문지 지역명들 중에서 30회 이상 등장한, 즉 여러 사람이 방문한 지역의 행만 유지해서 Outlier에 해당하는 희소 지역들은 제외하고자 했다.

패턴 마이닝을 위한 트랜잭션은 [CLUSTER_x, VISIT_AREA_NM] 으로 생성하여 단순하게 지역 이름과 방문객 CLUSTER 집단 번호를 연결해서 2-items set으로 구성했다.

그후 FP-Growth(support ≥ 0.008)를 통해 association_rules() 로 confidence가 0.35 이상이 되는 규칙을 계산해주었다.

그리고 해당 규칙을 직접 시각화하여 특정 방문객 분류 집단이 어느 방문지를 자주 방문하는 지에 대해서 패턴을 한눈에 알아볼 수 있도록 하였다.

## 3. 결과 (예상 vs. 실제)

처음 예상은 생각보다 지역이 다양하게 존재해서 지역명 등장 횟수 조건을 10개 정도로 잡으려고 했으나, 생각보다 유명 관광지는 높은 빈도수로 등장하는 특성이 있어서
30회 정도로 늘려서 정상적인 패턴 마이닝이 가능하도록 수정했다.

또한 특정 클러스터 집합이 특정 관광지로 몰려서 confidence 수치가 좀 더 높게 나올 것으로 예상했으나,
클러스터 집단에 따라서 특정 관광지로 많이 치우치지 않고 0.5 이하의 confidence 수치가 주로 등장했다.

## 4. 분석 의미 & 향후 조치

처음에 패턴 마이닝 작업을 통해 기대한 결과는 “CLUSTER_1 고객은 광안리해수욕장을 60 % 확률로 방문” 같은 확실한 패턴으로 타깃 마케팅 추천 규칙을 생성하고자 했다.

하지만 이번 실행 결과를 통해 볼 때에 특정 클러스터 집합이 특정 관광지에 치우치는 충분히 강한 규칙은 존재하지 않는 것을 확인할 수 있었다.

클러스터 기준 방문지 편향이 작거나, 필터나 조건 임계치를 조금 수정할 필요가 있을 것으로 보인다.

따라서 향후 조치로 클러스터 기준을 조금 더 세분화하여 제대로 된 관광지 편향 규칙을 찾아내거나, 필터와 조건 임계치를 수정해서 confidence 수치를 조금 더 높일 수 있는 방안을 마련해보고자 한다.

## 5. 정리

현재 데이터에서는 “지역 ≥ 30회 & confidence ≥ 0.35” 조건으로 효과적인 추천을 위한 편향된 규칙은 나오지 않은 것 같다.

필터를 단계적으로 완화하고, 다차원(추가 속성) 규칙 탐색을 통해 실질적 인사이트를 찾는 것이 다음 과제이다.
